<!DOCTYPE html>
<html>
  <head>
    <title>ShoppingApplication</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <script src="https://js.stripe.com/v3/"></script>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <%#= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <nav>
  <% if user_signed_in? %>
    <!-- Display user information or sign out link -->
    Welcome <%= current_user.email %>!
    <br>
    <%= link_to "All Products", products_path, style: 'width: 205px; height: 40px;', class: 'btn btn-dark'%>
    <div style="text-align: left; padding-left: 1200px;">
      <%= link_to 'Sign out',  destroy_user_session_path, method: :delete, width: '70px; height: 30px;', class: 'btn btn-dark' %>
    </div>
  <% end %>
</nav>


  <body>
      <% if flash[:notice] %>
      <div class="alert alert-success">
        <%= flash[:notice] %>
      </div>
    <% end %>

    <% if flash[:alert] %>
      <div class="alert alert-danger">
        <%= flash[:alert] %>
      </div>
    <% end %>
    <div class="shopping-cart-box">
    <h1>Shopping cart</h1>
    <% if @cart.present? %>
      <% @cart.each do |product| %>
        <%= product.name %><br>
      <% end %>
      <%= button_to "Buy now!", checkout_create_path, remote: true, data: { disable_with: "Validating..." }, class: "buy-button" %>
    <% else %>
      <p>Your cart is empty</p>
    <% end %>
  </div>

    <%= yield %>
  </body>
</html>
